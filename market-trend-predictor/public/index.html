<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Sentiment Analysis Dashboard</title>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	</head>
	<body>
		<h1>Sentiment Analysis Dashboard</h1>
		<canvas id="sentimentChart" width="400" height="200"></canvas>

		<script>
			const ctx = document.getElementById("sentimentChart").getContext("2d");
			const sentimentChart = new Chart(ctx, {
				type: "bar",
				data: {
					labels: ["Positive", "Negative", "Neutral"],
					datasets: [
						{
							label: "Sentiment Count",
							data: [0, 0, 0], // Initial data
							backgroundColor: [
								"rgba(75, 192, 192, 0.2)",
								"rgba(255, 99, 132, 0.2)",
								"rgba(255, 205, 86, 0.2)",
							],
							borderColor: [
								"rgba(75, 192, 192, 1)",
								"rgba(255, 99, 132, 1)",
								"rgba(255, 205, 86, 1)",
							],
							borderWidth: 1,
						},
					],
				},
				options: {
					scales: {
						y: {
							beginAtZero: true,
						},
					},
				},
			});

			// Fetch data from Node.js server and update the chart
			fetch("/analyze")
				.then((response) => response.json())
				.then((data) => {
					sentimentChart.data.datasets[0].data = [
						data.statistics.positive,
						data.statistics.negative,
						data.statistics.neutral,
					];
					sentimentChart.update();
				})
				.catch((error) => console.error("Error fetching data:", error));
		</script>
	</body>
</html>
